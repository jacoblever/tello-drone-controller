<!doctype html>
<html>
  <head>
    <title>Tello Frontend</title>
    <script src="droneApi.js" type="text/javascript"></script>
  </head>
  <body>
      <script type="text/javascript">
        function sendCommand(command) {
          setStatus("Sending...");
          window.droneApi.sendCommand(command, function(response) {
            setStatus(response);
          })
        }

        function setStatus(text) {
          statusDiv = document.getElementById("status");
          statusDiv.innerHTML = text;
        }

        function updateStats() {
          window.droneApi.getStats(function(stats) {
            statsDiv = document.getElementById("stats");
            statsDiv.innerHTML = stats;
            setTimeout(updateStats, 100);
          });
        }

        function sendTextCommand(input) {
          if(event.keyCode == 13) { // enter key
            sendCommand(input.value);
            input.value = "";
          }
        }

        (function(){
          updateStats();
        })();
    </script>

    <button onclick="sendCommand('start')">Start</button>
    <button onclick="sendCommand('takeoff')">Take off</button>
    <button onclick="sendCommand('land')">Land</button>
    <button onclick="sendCommand('up 100')">Up</button>
    <button onclick="sendCommand('down 100')">Down</button>
    <button onclick="sendCommand('streamon')">Record video (30 sec)</button>

    <input onkeyup="sendTextCommand(this)"/>
    <div id="status">Once the Drone is connected click Start to put it into SDK mode</div>
    <div id="stats"></div>
  </body>
</html>
